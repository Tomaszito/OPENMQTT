EthernetClient net;
MQTTClient client;

const char* mqttServer = mqttSERVER;
const char* mqttUsername = mqttUSERNAME;
const char* mqttPassword = mqttPASSWORD;
const char* deviceName = HARDWARE;

unsigned long lastMillis = 0;
unsigned long sendmillis = 0;
unsigned long currentmillis = 0;
boolean MQTTOFF = false;
boolean MQTTOFFONSTART = false;
boolean MqttConnectionTimeOut = false;
int ConnectionErrors = 0;
char buffer[30];
char buffer1[30];
char buffer2[30];
char buffer3[30];
/*Mqtt payload setup*/
const char *const subsrcibeOut[] PROGMEM = {
  SubTopicOut1,
  SubTopicOut2,
  SubTopicOut3,
  SubTopicOut4,
  SubTopicOut5,
  SubTopicOut6,
  SubTopicOut7,
  SubTopicOut8,
  SubTopicOut9,
  SubTopicOut10,
  SubTopicOut11,
  SubTopicOut12,
  SubTopicOut13,
  SubTopicOut14,
  SubTopicOut15,
  SubTopicOut16,
  SubTopicOut17,
  SubTopicOut18,
  SubTopicOut19,
  SubTopicOut20,
  SubTopicOut21,
  SubTopicOut22,
  SubTopicOut23,
  SubTopicOut24,
  SubTopicOut25,
  SubTopicOut26,
  SubTopicOut27,
  SubTopicOut28,
  SubTopicOut29,
  SubTopicOut30,
  SubTopicOut31,
  SubTopicOut32,
  SubTopicOut33,
  SubTopicOut34,
  SubTopicOut35,
  SubTopicOut36
};

const char *const subsrcibeIn[INPUTSINSYSTEM] PROGMEM = {
  SubTopicIn1,
  SubTopicIn2,
  SubTopicIn3,
  SubTopicIn4,
  SubTopicIn5,
  SubTopicIn6,
  SubTopicIn7,
  SubTopicIn8,
  SubTopicIn9,
  SubTopicIn10,
  SubTopicIn11,
  SubTopicIn12,
  SubTopicIn13,
  SubTopicIn14,
  SubTopicIn15,
  SubTopicIn16,
  SubTopicIn17,
  SubTopicIn18,
  SubTopicIn19,
  SubTopicIn20,
  SubTopicIn21,
  SubTopicIn22,
  SubTopicIn23,
  SubTopicIn24,
  SubTopicIn25,
  SubTopicIn26,
  SubTopicIn27
};

const char *const publisOut[OUTPUTSINSYSTEM] PROGMEM = {
  PubTopicOut1,
  PubTopicOut2,
  PubTopicOut3,
  PubTopicOut4,
  PubTopicOut5,
  PubTopicOut6,
  PubTopicOut7,
  PubTopicOut8,
  PubTopicOut9,
  PubTopicOut10,
  PubTopicOut11,
  PubTopicOut12,
  PubTopicOut13,
  PubTopicOut14,
  PubTopicOut15,
  PubTopicOut16,
  PubTopicOut17,
  PubTopicOut18,
  PubTopicOut19,
  PubTopicOut20,
  PubTopicOut21,
  PubTopicOut22,
  PubTopicOut23,
  PubTopicOut24,
  PubTopicOut25,
  PubTopicOut26,
  PubTopicOut27,
  PubTopicOut28,
  PubTopicOut29,
  PubTopicOut30,
  PubTopicOut31,
  PubTopicOut32,
  PubTopicOut33,
  PubTopicOut34,
  PubTopicOut35,
  PubTopicOut36,
};

const char *const publisIn[INPUTSINSYSTEM] PROGMEM = {
  PubTopicIn1,
  PubTopicIn2,
  PubTopicIn3,
  PubTopicIn4,
  PubTopicIn5,
  PubTopicIn6,
  PubTopicIn7,
  PubTopicIn8,
  PubTopicIn9,
  PubTopicIn10,
  PubTopicIn11,
  PubTopicIn12,
  PubTopicIn13,
  PubTopicIn14,
  PubTopicIn15,
  PubTopicIn16,
  PubTopicIn17,
  PubTopicIn18,
  PubTopicIn19,
  PubTopicIn20,
  PubTopicIn21,
  PubTopicIn22,
  PubTopicIn23,
  PubTopicIn24,
  PubTopicIn25,
  PubTopicIn26,
  PubTopicIn27
};

const char *const PubTopicTemp[] PROGMEM = {
  PubTopicTemp1,
  PubTopicTemp2,
  PubTopicTemp3,
  PubTopicTemp4,
  PubTopicTemp5,
  PubTopicTemp6,
  PubTopicTemp7,
  PubTopicTemp8,
  PubTopicTemp9,
  PubTopicTemp10,
  PubTopicTemp11,
  PubTopicTemp12,
  PubTopicTemp13,
  PubTopicTemp14,
  PubTopicTemp15,
  PubTopicTemp16,
  PubTopicTemp17
};

const char *const PubTopicHumidity[] PROGMEM = {
  PubTopicHumidity1,
  PubTopicHumidity2,
  PubTopicHumidity3,
  PubTopicHumidity4,
  PubTopicHumidity5,
  PubTopicHumidity6,
  PubTopicHumidity7,
  PubTopicHumidity8,
  PubTopicHumidity9,
  PubTopicHumidity10,
  PubTopicHumidity11,
  PubTopicHumidity12,
  PubTopicHumidity13,
  PubTopicHumidity14,
  PubTopicHumidity15,
  PubTopicHumidity16,
  PubTopicHumidity17
};

const boolean OutputType[OUTPUTSINSYSTEM] = {
  OutputType1,
  OutputType2,
  OutputType3,
  OutputType4,
  OutputType5,
  OutputType6,
  OutputType7,
  OutputType8,
  OutputType9,
  OutputType10,
  OutputType11,
  OutputType12,
  OutputType13,
  OutputType14,
  OutputType15,
  OutputType16,
  OutputType17,
  OutputType18,
  OutputType19,
  OutputType20,
  OutputType21,
  OutputType22,
  OutputType23,
  OutputType24,
  OutputType25,
  OutputType26,
  OutputType27,
  OutputType28,
  OutputType29,
  OutputType30,
  OutputType31,
  OutputType32,
  OutputType33,
  OutputType34,
  OutputType35,
  OutputType36
};
const boolean TempSensorType[usedTEMPMETERS] = {
  TempSensorType1,
  TempSensorType2,
  TempSensorType3,
  TempSensorType4,
  TempSensorType5,
  TempSensorType6,
  TempSensorType7,
  TempSensorType8,
  TempSensorType9,
  TempSensorType10,
  TempSensorType11,
  TempSensorType12,
  TempSensorType13,
  TempSensorType14,
  TempSensorType15,
  TempSensorType16,
  TempSensorType17,
  TempSensorType18
};
const boolean OutAsTermostate[OUTPUTSINSYSTEM] = {
  OutAsTermostate1,
  OutAsTermostate2,
  OutAsTermostate3,
  OutAsTermostate4,
  OutAsTermostate5,
  OutAsTermostate6,
  OutAsTermostate7,
  OutAsTermostate8,
  OutAsTermostate9,
  OutAsTermostate10,
  OutAsTermostate11,
  OutAsTermostate12,
  OutAsTermostate13,
  OutAsTermostate14,
  OutAsTermostate15,
  OutAsTermostate16,
  OutAsTermostate17,
  OutAsTermostate18,
  OutAsTermostate19,
  OutAsTermostate20,
  OutAsTermostate21,
  OutAsTermostate22,
  OutAsTermostate23,
  OutAsTermostate24,
  OutAsTermostate25,
  OutAsTermostate26,
  OutAsTermostate27,
  OutAsTermostate28,
  OutAsTermostate29,
  OutAsTermostate30,
  OutAsTermostate31,
  OutAsTermostate32,
  OutAsTermostate33,
  OutAsTermostate34,
  OutAsTermostate35,
  OutAsTermostate36
};

const boolean  AtachSwitch[OUTPUTSINSYSTEM] = {
   AtachSwitch1,
   AtachSwitch2,
   AtachSwitch3,
   AtachSwitch4,
   AtachSwitch5,
   AtachSwitch6,
   AtachSwitch7,
   AtachSwitch8,
   AtachSwitch9,
   AtachSwitch10,
   AtachSwitch11,
   AtachSwitch12,
   AtachSwitch13,
   AtachSwitch14,
   AtachSwitch15,
   AtachSwitch16,
   AtachSwitch17,
   AtachSwitch18,
   AtachSwitch19,
   AtachSwitch20,
   AtachSwitch21,
   AtachSwitch22,
   AtachSwitch23,
   AtachSwitch24,
   AtachSwitch25,
   AtachSwitch26,
   AtachSwitch27,
   AtachSwitch28,
   AtachSwitch29,
   AtachSwitch30,
   AtachSwitch31,
   AtachSwitch32,
   AtachSwitch33,
   AtachSwitch34,
   AtachSwitch35,
   AtachSwitch36
};

const boolean SwitchType[OUTPUTSINSYSTEM] = {
  SwitchType1,
  SwitchType2,
  SwitchType3,
  SwitchType4,
  SwitchType5,
  SwitchType6,
  SwitchType7,
  SwitchType8,
  SwitchType9,
  SwitchType10,
  SwitchType11,
  SwitchType12,
  SwitchType13,
  SwitchType14,
  SwitchType15,
  SwitchType16,
  SwitchType17,
  SwitchType18,
  SwitchType19,
  SwitchType20,
  SwitchType21,
  SwitchType22,
  SwitchType23,
  SwitchType24,
  SwitchType25,
  SwitchType26,
  SwitchType27,
  SwitchType28,
  SwitchType29,
  SwitchType30,
  SwitchType31,
  SwitchType32,
  SwitchType33,
  SwitchType34,
  SwitchType35,
  SwitchType36
};

const int OutSwitch[OUTPUTSINSYSTEM] = {
  OutSwitch1,
  OutSwitch2,
  OutSwitch3,
  OutSwitch4,
  OutSwitch5,
  OutSwitch6,
  OutSwitch7,
  OutSwitch8,
  OutSwitch9,
  OutSwitch10,
  OutSwitch11,
  OutSwitch12,
  OutSwitch13,
  OutSwitch14,
  OutSwitch15,
  OutSwitch16,
  OutSwitch17,
  OutSwitch18,
  OutSwitch19,
  OutSwitch20,
  OutSwitch21,
  OutSwitch22,
  OutSwitch23,
  OutSwitch24,
  OutSwitch25,
  OutSwitch26,
  OutSwitch27,
  OutSwitch28,
  OutSwitch29,
  OutSwitch30,
  OutSwitch31,
  OutSwitch32,
  OutSwitch33,
  OutSwitch34,
  OutSwitch35,
  OutSwitch36
};

const boolean InputType[INPUTSINSYSTEM] = {
  InputType1,
  InputType2,
  InputType3,
  InputType4,
  InputType5,
  InputType6,
  InputType7,
  InputType8,
  InputType9,
  InputType10,
  InputType11,
  InputType12,
  InputType13,
  InputType14,
  InputType15,
  InputType16,
  InputType17,
  InputType18,
  InputType19,
  InputType20,
  InputType21,
  InputType22,
  InputType23,
  InputType24,
  InputType25,
  InputType26,
  InputType27
};

const boolean InputAsSwitch[INPUTSINSYSTEM] = {
  InputAsSwitch1,
  InputAsSwitch2,
  InputAsSwitch3,
  InputAsSwitch4,
  InputAsSwitch5,
  InputAsSwitch6,
  InputAsSwitch7,
  InputAsSwitch8,
  InputAsSwitch9,
  InputAsSwitch10,
  InputAsSwitch11,
  InputAsSwitch12,
  InputAsSwitch13,
  InputAsSwitch14,
  InputAsSwitch15,
  InputAsSwitch16,
  InputAsSwitch17,
  InputAsSwitch18,
  InputAsSwitch19,
  InputAsSwitch20,
  InputAsSwitch21,
  InputAsSwitch22,
  InputAsSwitch23,
  InputAsSwitch24,
  InputAsSwitch25,
  InputAsSwitch26,
  InputAsSwitch27
};
const boolean  InputSwitchType[INPUTSINSYSTEM] = {
  InputSwitchType1,
  InputSwitchType2,
  InputSwitchType3,
  InputSwitchType4,
  InputSwitchType5,
  InputSwitchType6,
  InputSwitchType7,
  InputSwitchType8,
  InputSwitchType9,
  InputSwitchType10,
  InputSwitchType11,
  InputSwitchType12,
  InputSwitchType13,
  InputSwitchType14,
  InputSwitchType15,
  InputSwitchType16,
  InputSwitchType17,
  InputSwitchType18,
  InputSwitchType19,
  InputSwitchType20,
  InputSwitchType21,
  InputSwitchType22,
  InputSwitchType23,
  InputSwitchType24,
  InputSwitchType25,
  InputSwitchType26,
  InputSwitchType27,
};

const boolean AnalogMeter[INPUTSINSYSTEM] = {
  AnalogMeter1,
  AnalogMeter2,
  AnalogMeter3,
  AnalogMeter4,
  AnalogMeter5,
  AnalogMeter6,
  AnalogMeter7,
  AnalogMeter8,
  AnalogMeter9,
  AnalogMeter10,
  AnalogMeter11,
  AnalogMeter12,
  AnalogMeter13,
  AnalogMeter14,
  AnalogMeter15,
  AnalogMeter16,
  AnalogMeter17,
  AnalogMeter18,
  AnalogMeter19,
  AnalogMeter20,
  AnalogMeter21,
  AnalogMeter22,
  AnalogMeter23,
  AnalogMeter24,
  AnalogMeter25,
  AnalogMeter26,
  AnalogMeter27,
};

const char *const TempSensorName[] PROGMEM = {
  TempSensorName1,
  TempSensorName2,
  TempSensorName3,
  TempSensorName4,
  TempSensorName5,
  TempSensorName6,
  TempSensorName7,
  TempSensorName8,
  TempSensorName9,
  TempSensorName10,
  TempSensorName11,
  TempSensorName12,
  TempSensorName13,
  TempSensorName14,
  TempSensorName15,
  TempSensorName16,
  TempSensorName17
};

const char *const TempSensorId[] PROGMEM = {
  TempSensorId1,
  TempSensorId2,
  TempSensorId3,
  TempSensorId4,
  TempSensorId5,
  TempSensorId6,
  TempSensorId7,
  TempSensorId8,
  TempSensorId9,
  TempSensorId10,
  TempSensorId11,
  TempSensorId12,
  TempSensorId13,
  TempSensorId14,
  TempSensorId15,
  TempSensorId16,
  TempSensorId17
};
